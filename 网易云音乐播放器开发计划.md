# 网易云音乐播放器开发计划

## 项目概述

本项目旨在开发一个类似网易云音乐的音乐播放器应用，提供基本的音乐播放、搜索、用户管理等功能。项目采用前后端分离架构，前端使用Vue框架，后端使用Go语言的Gin框架和Gorm ORM库。

## 技术栈

### 前端

- Vue.js：前端框架
- Pinia：状态管理
- Vue Router：路由管理
- Axios：HTTP请求
- Element UI：UI组件库
- HTML5 Audio API：音频播放

### 后端

- Go：编程语言
- Gin：Web框架
- Gorm：ORM库
- MySQL：数据库
- Redis：缓存（可选）
- JWT：用户认证

## 功能模块

### 1. 用户模块

- 用户注册
- 用户登录
- 用户信息管理
- 用户收藏管理

### 2. 音乐模块

- 音乐播放（播放、暂停、上一首、下一首）
- 播放列表管理
- 音乐详情展示
- 歌词显示

### 3. 搜索模块

- 音乐搜索
- 歌手搜索
- 专辑搜索
- 搜索历史记录

### 4. 发现模块

- 推荐歌单
- 热门歌曲
- 新歌上架

### 5. 评论模块

- 查看评论
- 发表评论
- 点赞评论

## 数据库设计

### 用户表（users）

```sql
CREATE TABLE `users` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `password` varchar(100) NOT NULL,
  `nickname` varchar(50) DEFAULT NULL,
  `avatar` varchar(255) DEFAULT NULL,
  `email` varchar(100) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

### 歌曲表（songs）

```sql
CREATE TABLE `songs` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL,
  `artist_id` bigint(20) NOT NULL,
  `album_id` bigint(20) DEFAULT NULL,
  `duration` int(11) DEFAULT NULL,
  `url` varchar(255) NOT NULL,
  `cover` varchar(255) DEFAULT NULL,
  `lyric` text,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

### 歌手表（artists）

```sql
CREATE TABLE `artists` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL,
  `avatar` varchar(255) DEFAULT NULL,
  `description` text,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

### 专辑表（albums）

```sql
CREATE TABLE `albums` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL,
  `artist_id` bigint(20) NOT NULL,
  `cover` varchar(255) DEFAULT NULL,
  `description` text,
  `release_time` timestamp NULL DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

### 歌单表（playlists）

```sql
CREATE TABLE `playlists` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL,
  `user_id` bigint(20) NOT NULL,
  `cover` varchar(255) DEFAULT NULL,
  `description` text,
  `is_public` tinyint(1) DEFAULT '1',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

### 歌单歌曲关联表（playlist_songs）

```sql
CREATE TABLE `playlist_songs` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `playlist_id` bigint(20) NOT NULL,
  `song_id` bigint(20) NOT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `playlist_song` (`playlist_id`,`song_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

### 评论表（comments）

```sql
CREATE TABLE `comments` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `user_id` bigint(20) NOT NULL,
  `content` text NOT NULL,
  `type` tinyint(4) NOT NULL COMMENT '1:歌曲,2:歌单,3:专辑',
  `target_id` bigint(20) NOT NULL,
  `parent_id` bigint(20) DEFAULT NULL,
  `likes` int(11) DEFAULT '0',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

## API设计

### 用户相关

- `POST /api/user/register` - 用户注册
- `POST /api/user/login` - 用户登录
- `GET /api/user/info` - 获取用户信息
- `PUT /api/user/info` - 更新用户信息

### 音乐相关

- `GET /api/songs/:id` - 获取歌曲详情
- `GET /api/songs/url/:id` - 获取歌曲播放地址
- `GET /api/songs/lyric/:id` - 获取歌词

### 歌手相关

- `GET /api/artists/:id` - 获取歌手详情
- `GET /api/artists/:id/songs` - 获取歌手的歌曲
- `GET /api/artists/:id/albums` - 获取歌手的专辑

### 专辑相关

- `GET /api/albums/:id` - 获取专辑详情
- `GET /api/albums/:id/songs` - 获取专辑的歌曲

### 歌单相关

- `GET /api/playlists/:id` - 获取歌单详情
- `GET /api/playlists/:id/songs` - 获取歌单的歌曲
- `POST /api/playlists` - 创建歌单
- `PUT /api/playlists/:id` - 更新歌单
- `DELETE /api/playlists/:id` - 删除歌单
- `POST /api/playlists/:id/songs` - 添加歌曲到歌单
- `DELETE /api/playlists/:id/songs/:songId` - 从歌单中删除歌曲

### 搜索相关

- `GET /api/search` - 搜索（支持歌曲、歌手、专辑、歌单）

### 评论相关

- `GET /api/comments` - 获取评论
- `POST /api/comments` - 发表评论
- `DELETE /api/comments/:id` - 删除评论
- `POST /api/comments/:id/like` - 点赞评论

## 前端页面设计

### 主要页面

1. 首页 - 展示推荐内容、热门歌曲等
2. 搜索页 - 搜索功能和结果展示
3. 播放页 - 歌曲播放、歌词展示
4. 歌单详情页 - 展示歌单信息和歌曲列表
5. 歌手详情页 - 展示歌手信息、歌曲和专辑
6. 专辑详情页 - 展示专辑信息和歌曲
7. 个人中心 - 用户信息、收藏管理等

### 公共组件

1. 顶部导航栏 - 导航、搜索入口
2. 底部播放器 - 当前播放歌曲控制
3. 侧边栏 - 导航菜单

## 开发计划

### 第一阶段：基础架构搭建（1周）

1. 前端项目初始化
   - Vue项目创建
   - 路由配置
   - 状态管理配置
   - UI组件库集成
2. 后端项目初始化
   - Go项目创建
   - Gin框架配置
   - Gorm配置
   - 数据库设计与创建

### 第二阶段：用户模块开发（1周）

1. 后端
   - 用户注册接口
   - 用户登录接口
   - JWT认证中间件
   - 用户信息接口
2. 前端
   - 登录页面
   - 注册页面
   - 个人中心页面

### 第三阶段：音乐基础功能开发（2周）

1. 后端
   - 歌曲相关接口
   - 歌手相关接口
   - 专辑相关接口
   - 歌单相关接口
2. 前端
   - 音乐播放器组件
   - 歌曲列表组件
   - 歌词展示组件
   - 歌单详情页

### 第四阶段：搜索和发现功能开发（1周）

1. 后端
   - 搜索接口
   - 推荐接口
2. 前端
   - 搜索页面
   - 首页推荐内容

### 第五阶段：评论功能开发（1周）

1. 后端
   - 评论相关接口
2. 前端
   - 评论组件
   - 评论列表展示

### 第六阶段：测试与优化（1周）

1. 功能测试
2. 性能优化
3. UI/UX优化
4. Bug修复

## 项目部署

### 前端部署

- 使用Nginx部署Vue静态文件

### 后端部署

- 编译Go程序
- 使用Docker容器化部署
- 配置反向代理

## 技术难点与解决方案

### 1. 音乐播放控制

**难点**：实现播放、暂停、上一首、下一首等功能，并保持播放状态。
**解决方案**：使用HTML5 Audio API结合Vuex状态管理，统一管理播放状态。

### 2. 歌词同步显示

**难点**：歌词需要根据播放进度实时滚动显示。
**解决方案**：解析LRC格式歌词，通过监听音频播放时间事件，动态计算当前应显示的歌词行。

### 3. 用户认证与授权

**难点**：保证用户数据安全，防止未授权访问。
**解决方案**：使用JWT进行身份验证，结合中间件实现接口权限控制。

### 4. 性能优化

**难点**：音乐资源加载可能较慢，影响用户体验。
**解决方案**：

- 实现音乐文件缓存
- 图片懒加载
- 组件按需加载
- 后端接口缓存

## 总结

本开发计划概述了一个基于Vue前端和Go后端的网易云音乐播放器克隆项目的开发流程。通过分阶段实施，可以逐步完成各个功能模块的开发，最终实现一个具有基本音乐播放、搜索、用户管理等功能的音乐播放器应用。

在实际开发过程中，可能需要根据具体情况调整计划和优先级，以确保项目的顺利进行。同时，建议在开发过程中注重代码质量和用户体验，以打造一个高质量的音乐播放器应用。
